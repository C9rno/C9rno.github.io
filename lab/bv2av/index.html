<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="https://cdn.muicss.com/mui-latest/css/mui.min.css" rel="stylesheet" type="text/css" />
<link href="/lab/static/style.css" rel="stylesheet" type="text/css" />
<script src="https://cdn.muicss.com/mui-latest/js/mui.min.js"></script>
<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="/lab/static/script.js"></script>
</head>
<body>
<div id="sidedrawer" class="mui--no-user-select">
<div id="sidedrawer-brand" class="mui--appbar-line-height">
<span class="mui--text-title">C9rno.github.io</span>
</div>
<div class="mui-divider"></div>
<ul>
<li>
<strong>Lab</strong>
<ul>
<li><a href="#">AV2BV</a></li>
<li><a href="/lab">Labs Homepage</a></li>
</ul>
</li>
<li>
<strong>Blog</strong>
<ul>
<li><a href="/">Mainsite</a></li>
</ul>
</li>
</div>
<header id="header">
<div class="mui-appbar mui--appbar-line-height">
<div class="mui-container-fluid">
<a class="sidedrawer-toggle mui--visible-xs-inline-block mui--visible-sm-inline-block js-show-sidedrawer">☰</a>
<a class="sidedrawer-toggle mui--hidden-xs mui--hidden-sm js-hide-sidedrawer">☰</a>
<span class="mui--text-title mui--visible-xs-inline-block mui--visible-sm-inline-block">C9rno.github.io</span>
</div>
</div>
</header>
<div id="content-wrapper">
<div class="mui--appbar-height"></div>
<div class="mui-container-fluid">
<br>
<script>
    var table = 'fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF'
    var s = new Array(11,10,3,8,4,6)
    var xor = 177451812
    var add = 8728348608
    
    function enc(x) {
        av = x
        x = (x^xor)+add
        var rs = ''
        var r = new Array ('B','V','1',' ',' ','4',' ','1',' ','7')
        for (i=0;i<6;i++) {
            r[s[i]]=table[parseInt(x/Math.pow(58,i))%58]
        }
        r.forEach (function(e) {
            rs += e
        })
        var rf = new Array (av, rs)
        return rf
    }

    function dec(x) {
        var av = 0
        for (i=0;i<6;i++) {
            av+=table.indexOf([x[s[i]]])*Math.pow(58,i)
        }
        av = (av-add)^xor
        var rf = new Array (av, x)
        return rf
    }

    function runEnc() {
        var x = document.getElementById("encForm")
        addRow(enc(x))
    }

    function runDec() {
        var x = document.getElementById("decForm")
        addRow(dec(x))
    }
    
    function addRow(rf) {
        var currentRows = document.getElementById("Result").rows.length;
        var insertTr = document.getElementById("Result").insertRow(currentRows)
        var cellLeft = insertTr.insertCell(0)
        cellLeft.appendChild(document.createTextNode(rf[0]))
        var cellRight = insertTr.insertCell(1)
        cellRight.appendChild(document.createTextNode(rf[1]))
    }
        
</script>
<form class="mui-form">
    <legend>AV to BV (Encode)</legend>
    <div class="mui-textfield">
      <input type="text" id="encForm" placeholder="(Like 114514)">
      <label>AV Code</label>
    </div>
    <h6>*Note that 'av' is not included</h6>
    <button type="button" class="mui-btn mui-btn--raised mui-btn--primary" onclick="runEnc()">Encode</button>
</form>
</br>
<form class="mui-form">
    <legend>BV to AV (Decode)</legend>
    <div class="mui-textfield">
      <input type="text" id="decForm" placeholder="(Like BV1QE411G7qD)">
      <label>BV Code</label>
    </div>
    <button type="button" class="mui-btn mui-btn--raised mui-btn--primary" onclick="runDec()">Decode</button>
</form>
</br></br>
<h3>Result</h3>
<table id="Result" class="mui-table">
    <thead>
      <tr>
        <th>'av' No.</th>
        <th>'bv' No.</th>
      </tr>
    </thead>
    <tbody>
    </tbody>
</table>
</div>
</div>
<footer id="footer">
<div class="mui-container-fluid">
<br>
Made with ♥ by <a href="https://www.muicss.com">MUI</a>
</div>
</footer>
</body>
</html>